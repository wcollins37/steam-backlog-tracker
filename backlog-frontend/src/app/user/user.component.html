 <body>
    <p class="error" *ngIf="errorMessage != ''">{{errorMessage}}</p>
    <div *ngIf="user != null && user != undefined" class="topbar">
        <div class="back-button">
            <button mat-raised-button (click)="backToAddUser()">Back</button>
        </div>
        <p *ngIf="user != null && user != undefined" style="margin-top: 0">{{user.name}}'s Library</p>
        <p *ngIf="user != null && user != undefined">Average playtime per game: {{user.avgPlayTime}} hours</p>
        <p *ngIf="user != null && user != undefined">Number of uncompleted games in library: {{user.numUncompletedGames}}</p>
        <p *ngIf="user != null && user != undefined" style="margin-bottom: 5px">{{user.percentCompleted}}% of {{user.name}}'s library has been completed</p>
        <button mat-raised-button (click)="updateUser()" style="margin-bottom: 5px;">Update User</button>
        <div class="controls">
            <div class="displayedGames" style="margin-bottom: 5px">
                <input type="radio" id="all" name="displayed" value="all" checked="true" (change)="changeDisplayedGames($event.target.value)">
                <label for="all">All Games</label>
                <br/>
                <input type="radio" id="uncompleted" name="displayed" value="uncompleted" (change)="changeDisplayedGames($event.target.value)">
                <label for="uncompleted">Uncompleted Games</label>
            </div>
            <!--<mat-radio-group class="radio-group" (change)="changeDisplayedGames($event.value)" style="color: 44DE15">
                <mat-radio-button value="all" [disableRipple]="true">All games</mat-radio-button>
                <br/>
                <mat-radio-button value="uncompleted" [disableRipple]="true">Uncompleted games</mat-radio-button>
            </mat-radio-group>
            <br/>-->
            <button mat-raised-button (click)="getRandomGame()">Pick Random Game</button>
            <button mat-raised-button (click)="pickLeastPlayedUncompletedGame()">Least Played Uncompleted Game</button>
        </div>
    </div>
    <!--<app-library class="library" *ngIf="user != null && user != undefined" [games]="user.library"></app-library>-->
    <!--<div class="tableView">
        <table *ngIf="user != null && user != undefined" matSort class="gameTable" (matSortChange)="sortData($event)">

            <tr class="header-row">
                <th mat-sort-header="completed">Completed?</th>
                <th mat-sort-header="name">Name</th>
                <th mat-sort-header="img">Logo</th>
                <th mat-sort-header="hoursPlayed">Hours Played</th>
            </tr>

            <tr class="row" *ngFor="let game of user.library">
                <td class="cell" (click)="swapCompleted(game)"><img class="completed-img" [src]="game.completed ?
                    '../assets/check.png' :
                    '../assets/empty.png'"></td>
                <td class="cell" (click)="navigateToStore(game)">{{game.name}}</td>
                <td class="cell"><img class="cell-img" [src]="game.img"></td>
                <td class="cell">{{game.hoursPlayed}}</td>
            </tr>

        </table>
    </div>-->
    <div class="games">
        <table mat-table #mytable class="gameTable" [dataSource]="user.library" matSort (matSortChange)="sortData($event)">
            <ng-container matColumnDef="completed">
                <th class="header-cell" mat-header-cell *matHeaderCellDef mat-sort-header>Completed?</th>
                <td mat-cell (click)="swapCompleted(game)" *matCellDef="let game"><img class="completed-img" [src]="game.completed ?
                        '../assets/check.png' :
                        '../assets/empty.png'" style="text-align: left;"></td>
            </ng-container>

            <ng-container matColumnDef="name">
                <th class="header-cell" mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                <td mat-cell *matCellDef="let game" (click)="navigateToStore(game)">{{game.name}}</td>
            </ng-container>

            <ng-container matColumnDef="logo">
                <th class="header-cell" mat-header-cell *matHeaderCellDef mat-sort-header>Logo</th>
                <td mat-cell *matCellDef="let game"><img class="cell-img" [src]="game.img"></td>
            </ng-container>
                
            <ng-container matColumnDef="hoursPlayed">
                <th class="header-cell" mat-header-cell *matHeaderCellDef mat-sort-header>Hours Played</th>
                <td mat-cell *matCellDef="let game">{{game.hoursPlayed}}</td>
            </ng-container>

            <tr class="header-row" mat-header-row *matHeaderRowDef="['completed','name','logo','hoursPlayed']; sticky: true"></tr>
            <tr class="row-cell" mat-row *matRowDef="let row; columns: ['completed','name','logo','hoursPlayed'];"></tr>
        </table>
    </div>
</body>